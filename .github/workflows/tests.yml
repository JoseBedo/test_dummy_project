on: push
name: Runing all tests
jobs:
  run_tests: 
    runs-on: ubuntu_latest
    steps:
    - uses: actions/checkout@v2

    - name: Setup latest Alpine Linux
      uses: jirutka/setup-alpine@v1

    - name: Run script inside Alpine chroot as root
      run: |
        docker-compse up -d 
        docker exec api_test pytest -s 
      shell: alpine.sh --root {0}
